<html>
    <head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    </head>    

    <body>
        
        <div class="custombox" id="root"></div>


        <div class="custombox" id="sample">
            <form>
                <div class="mb-3">
                  <label for="exampleInputEmail1" class="form-label">Email address</label>
                  <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
                  <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
                </div>
                <div class="mb-3">
                  <label for="exampleInputPassword1" class="form-label">Password</label>
                  <input type="password" class="form-control" id="exampleInputPassword1">
                </div>
                <div class="mb-3 form-check">
                  <input type="checkbox" class="form-check-input" id="exampleCheck1">
                  <label class="form-check-label" for="exampleCheck1">Check me out</label>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
              </form>

        </div>
    

        <style>
            .custombox {
                width:500px;
                margin:20px;
            }
        </style>




        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

        <script>
            
            function start() {
                let f = new FormKit();
                f.inputEmail('emailField', "Email address", `We'll never share your email with anyone else.`);
                f.inputPassword('passwordField', "Password");
                f.checkbox('checkboxField', 'Check me out', "Hint for checkbox");
                f.submit('Submit');
                document.querySelector('#root').appendChild(f.build());
            }

        </script>

        <script>
            class FormKit {
                content = [];
                
                submit(caption) {
                    let template = `<button type="submit" class="btn btn-primary">${caption}</button>`;
                    this.pushAsHTML(template);
                }

                build() {
                    let div = document.createElement('div');
                    for (let each of this.content) {
                        div.appendChild(each);
                    }

                    return div;
                }

                checkbox(modelName, caption, hint) {
                    let inputId = this.idFor(modelName);
                    let [hintTemplate, hintPointer] = this.hintLabelTemplate(hint, modelName);

                    let template = `
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="${inputId}" ${hintPointer}>
                        <label for="${inputId}" class="form-check-label">${caption}</label>
                        ${hintTemplate}
                    </div>
                    `;

                    this.pushAsHTML(template);
                }

                inputEmail(modelName, caption, hint) {
                    return this.input(modelName, 'email', caption, hint);
                }

                inputPassword(modelName, caption, hint) {
                    return this.input(modelName, 'password', caption, hint);
                }

                inputText(modelName, caption, hint) {
                    return this.input(modelName, 'text', caption, hint);
                }

                input(modelName, type, caption, hint) {
                    let inputId = this.idFor(modelName);
                    let [hintTemplate, hintPointer] = this.hintLabelTemplate(hint, modelName);

                    let template = `
                    <div class="mb-3">
                        <label for="${inputId}" class="form-label">${caption}</label>
                        <input type="${type}" class="form-control" id="${inputId}" ${hintPointer}>
                        ${hintTemplate}
                    </div>
                    `;

                    this.pushAsHTML(template);
                }

                hintLabelTemplate(hint, modelName) {
                    let hintTemplate = '';
                    let hintPointer = '';
                    if (hint) {
                        let hintId = this.idFor(`${modelName}-hint`);
                        hintTemplate =`<div id="${hintId}" class="form-text">${hint}</div>`;
                        hintPointer = `aria-describedby="${hintId}"`;
                    }
                    return [hintTemplate, hintPointer];
                }

                pushAsHTML(template) {
                    let pack = document.createElement('div');
                    pack.innerHTML = template;
                    this.content.push(pack);
                }

                idFor(name) {
                    return `formkit-${name}`;
                }
            }

        </script>

        <script>
                start();
        </script>
    </body>
</html>